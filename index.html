<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      window.__VUE_DEVTOOLS_HOST__ = "localhost"; // default: localhost
      window.__VUE_DEVTOOLS_PORT__ = "8098"; // default: 8098
    </script>
    <script src="http://localhost:8098"></script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./public/css/tailwind.css" />
    <title>Document</title>
  </head>
  <body>
    <div id="app">
      <!-- Navbar -->
      <div
        v-if="isLogin && !isAddingTask && !isEditingTask"
        class="
          flex
          justify-between
          bg-primarycolor
          text-white
          py-2
          text-xl
          font-semibold
        "
      >
        <div class="flex">
          <div class="pl-10 cursor-pointer">
            <a @click.prevent="backToHome">Home</a>
          </div>
          <div class="pl-10 cursor-pointer" @click="showAddForm">Add</div>
        </div>
        <div class="pr-10 cursor-pointer" @click="logout">Logout</div>
      </div>

      <!-- Registration Form -->
      <div
        class="
          w-screen
          h-screen
          flex flex-col
          justify-center
          items-center
          bg-primarycolor
        "
        v-if="isRegistering"
      >
        <div class="w-1/2 mb-7">
          <h2 class="text-4xl text-white font-display font-bold">
            Register Your Account
          </h2>
        </div>
        <div
          :class="{'bg-white h-screen/3+ rounded-md shadow-2xl w-1/2': errorMessage, 'bg-white h-screen/3 rounded-md shadow-2xl w-1/2': !errorMessage}"
        >
          <form id="form-register" @submit.prevent="submitRegister">
            <div class="relative flex flex-col">
              <label
                for="login-email"
                class="
                  text-gray-600 text-2xl
                  font-display
                  mt-6
                  ml-3
                  inline-block
                "
                >Email</label
              >
              <div class="flex items-center">
                <i class="fa fa-user text-primarycolor text-2xl ml-3"></i>
                <input
                  class="
                    w-11/12
                    text-lg
                    my-2
                    ml-3
                    border-b-2
                    focus:border-primarycolor
                    outline-none
                    transition-all
                    duration-500
                  "
                  type="text"
                  placeholder="Enter your email here, ex: user1@gmail.com"
                  id="login-email"
                  v-model="user.email"
                />
              </div>
            </div>
            <div class="relative flex flex-col">
              <label
                for="login-email"
                class="
                  text-gray-600 text-2xl
                  font-display
                  mt-6
                  ml-3
                  inline-block
                "
                >Password</label
              >
              <div class="flex items-center">
                <i class="fa fa-lock text-primarycolor text-2xl ml-3"></i>
                <input
                  class="
                    w-11/12
                    text-lg
                    my-2
                    ml-3
                    border-b-2
                    focus:border-primarycolor
                    outline-none
                    transition-all
                    duration-500
                  "
                  type="password"
                  placeholder="Enter your password here"
                  id="login-password"
                  v-model="user.password"
                />
              </div>
            </div>
            <div
              class="relative mt-4 ml-3 text-sm text-red-400"
              id="register-error-message"
              v-if="errorMessage"
            >
              {{ errorMessage }}
            </div>
            <div class="mt-4 ml-3">
              <div>
                <input
                  class="
                    p-2
                    pl-5
                    pr-5
                    rounded-lg
                    text-white
                    bg-primarycolor
                    cursor-pointer
                    transform
                    hover:translate-y-1
                    transition-all
                    duration-500
                  "
                  type="submit"
                  value="Register"
                />
              </div>
            </div>
          </form>
        </div>
        <div class="w-1/2 mt-4">
          <a
            class="text-white cursor-pointer justify-self-start font-medium"
            @click.prevent="backToLogin"
            >Back To Login Page</a
          >
        </div>
      </div>

      <!-- Login Form -->
      <div
        class="w-screen h-screen flex flex-col justify-center items-center"
        v-if="isLogin === false && isRegistering === false"
      >
        <form
          class="w-full flex flex-col justify-center items-center"
          id="form-login"
          @submit.prevent="submitLogin"
        >
          <img src="assets/avatar.svg" class="w-32" />
          <h2 class="text-3xl my-8 font-semibold font-display text-gray-700">
            Welcome
          </h2>
          <div>
            <i class="fa fa-user text-primarycolor text-xl"></i>
            <input
              class="
                border-b-2
                outline-none
                focus:border-primarycolor
                text-md
                transition-all
                duration-500
                text-lg
                ml-3
              "
              type="text"
              placeholder="Email"
              id="login-email"
              v-model="user.email"
            />
          </div>
          <div class="mt-8">
            <i class="fa fa-lock text-primarycolor text-xl"></i>
            <input
              class="
                border-b-2
                outline-none
                focus:border-primarycolor
                text-md
                transition-all
                duration-500
                text-lg
                ml-3
              "
              type="password"
              placeholder="Password"
              id="login-password"
              v-model="user.password"
            />
          </div>
          <div
            class="mt-8 w-50 text-sm text-red-400"
            id="login-error-message"
            v-if="errorMessage"
          >
            {{ errorMessage }}
          </div>
          <div class="mt-8">
            <div>
              <input
                class="
                  bg-primarycolor
                  text-white
                  rounded-full
                  px-20
                  py-3
                  text-lg
                  font-bold
                  uppercase
                  transform
                  hover:translate-y-1
                  transition-all
                  duration-500
                  cursor-pointer
                "
                type="submit"
                value="Login"
              />
            </div>
          </div>
        </form>
        <div class="mt-8 flex">
          <div class="text-gray-700 font-medium pr-1">
            Didn't have an account?
          </div>
          <a
            class="text-blue-500 cursor-pointer"
            @click.prevent="showRegisterForm"
            >Register here</a
          >
        </div>
      </div>

      <!-- Tasks Board -->
      <div class="p-10" v-if="isLogin && !isAddingTask && !isEditingTask">
        <div
          class="mb-2 text-sm text-red-400"
          id="login-error-message"
          v-if="errorMessage"
        >
          {{ errorMessage }}
        </div>
        <div class="grid grid-cols-4 gap-2 font-display">
          <div id="backlog-task" class="flex-col bg-gray-100">
            <div class="flex justify-between items-center">
              <div class="pt-4 pl-4">Backlog</div>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6 mt-3 mr-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
            </div>
            <div class="flex-col m-4 overflow-y-hidden">
              <div v-for="task in backlogTasks" class="flex-col bg-white mt-3">
                <div>
                  <div class="flex justify-between items-center">
                    <div class="font-semibold p-2">{{task.title}}</div>
                    <div class="flex mr-4">
                      <a @click="showEditForm(task.id)">
                        <svg
                          class="w-5 h-5 mr-2 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-3-3h24v24H-3z" />
                            <path d="M2 15.08V16h.92l9.06-9.06-.92-.92z" />
                            <path
                              d="M17.71 4.04a.996.996 0 000-1.41L15.37.29c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM0 14.25V18h3.75L14.81 6.94l-3.75-3.75L0 14.25zM2.92 16H2v-.92l9.06-9.06.92.92L2.92 16z"
                              fill="#2596be"
                            />
                          </g>
                        </svg>
                      </a>
                      <a @click="deleteTask(task.id)">
                        <svg
                          class="w-4 h-5 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-5-3h24v24H-5z" />
                            <path
                              d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V4H1v12zM3 6h8v10H3V6zm7.5-5l-1-1h-5l-1 1H0v2h14V1h-3.5z"
                              fill="#c92e20"
                            />
                          </g>
                        </svg>
                      </a>
                    </div>
                  </div>
                  <div class="p-2 pb-1 text-sm">{{task.description}}</div>
                  <div class="p-2 pb-1 text-sm capitalize">
                    Priority: {{task.priority}}
                  </div>
                  <div class="p-2 pb-1 text-sm">
                    Due Date: {{adjustDateForMainPage(task.due_date)}}
                  </div>
                </div>
                <div :class="getPriorityColor(task.priority)">&nbsp</div>
              </div>
            </div>
          </div>
          <div id="todo-task" class="flex-col bg-gray-100">
            <div class="flex justify-between items-center">
              <div class="pt-4 pl-4">Todo</div>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6 mt-3 mr-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
            </div>
            <div class="flex-col m-4 overflow-y-hidden">
              <div v-for="task in todoTasks" class="flex-col bg-white mt-3">
                <div>
                  <div class="flex justify-between items-center">
                    <div class="font-semibold p-2">{{task.title}}</div>
                    <div class="flex mr-4">
                      <a @click="showEditForm(task.id)">
                        <svg
                          class="w-5 h-5 mr-2 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-3-3h24v24H-3z" />
                            <path d="M2 15.08V16h.92l9.06-9.06-.92-.92z" />
                            <path
                              d="M17.71 4.04a.996.996 0 000-1.41L15.37.29c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM0 14.25V18h3.75L14.81 6.94l-3.75-3.75L0 14.25zM2.92 16H2v-.92l9.06-9.06.92.92L2.92 16z"
                              fill="#2596be"
                            />
                          </g>
                        </svg>
                      </a>
                      <a @click="deleteTask(task.id)">
                        <svg
                          class="w-4 h-5 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-5-3h24v24H-5z" />
                            <path
                              d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V4H1v12zM3 6h8v10H3V6zm7.5-5l-1-1h-5l-1 1H0v2h14V1h-3.5z"
                              fill="#c92e20"
                            />
                          </g>
                        </svg>
                      </a>
                    </div>
                  </div>
                  <div class="p-2 pb-1 text-sm">{{task.description}}</div>
                  <div class="p-2 pb-1 text-sm capitalize">
                    Priority: {{task.priority}}
                  </div>
                  <div class="p-2 pb-1 text-sm">
                    Due Date: {{adjustDateForMainPage(task.due_date)}}
                  </div>
                </div>
                <div :class="getPriorityColor(task.priority)">&nbsp</div>
              </div>
            </div>
          </div>
          <div id="in-progress-task" class="flex-col bg-gray-100">
            <div class="flex justify-between items-center">
              <div class="pt-4 pl-4">In Progress</div>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6 mt-3 mr-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
            </div>
            <div class="flex-col m-4 overflow-y-hidden">
              <div
                v-for="task in inProgressTasks"
                class="flex-col bg-white mt-3"
              >
                <div>
                  <div class="flex justify-between items-center">
                    <div class="font-semibold p-2">{{task.title}}</div>
                    <div class="flex mr-4">
                      <a @click="showEditForm(task.id)">
                        <svg
                          class="w-5 h-5 mr-2 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-3-3h24v24H-3z" />
                            <path d="M2 15.08V16h.92l9.06-9.06-.92-.92z" />
                            <path
                              d="M17.71 4.04a.996.996 0 000-1.41L15.37.29c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM0 14.25V18h3.75L14.81 6.94l-3.75-3.75L0 14.25zM2.92 16H2v-.92l9.06-9.06.92.92L2.92 16z"
                              fill="#2596be"
                            />
                          </g>
                        </svg>
                      </a>
                      <a @click="deleteTask(task.id)">
                        <svg
                          class="w-4 h-5 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-5-3h24v24H-5z" />
                            <path
                              d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V4H1v12zM3 6h8v10H3V6zm7.5-5l-1-1h-5l-1 1H0v2h14V1h-3.5z"
                              fill="#c92e20"
                            />
                          </g>
                        </svg>
                      </a>
                    </div>
                  </div>
                  <div class="p-2 pb-1 text-sm">{{task.description}}</div>
                  <div class="p-2 pb-1 text-sm capitalize">
                    Priority: {{task.priority}}
                  </div>
                  <div class="p-2 pb-1 text-sm">
                    Due Date: {{adjustDateForMainPage(task.due_date)}}
                  </div>
                </div>
                <div :class="getPriorityColor(task.priority)">&nbsp</div>
              </div>
            </div>
          </div>
          <div id="done-task" class="flex-col bg-gray-100">
            <div class="flex justify-between items-center">
              <div class="pt-4 pl-4">Done</div>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6 mt-3 mr-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
            </div>
            <div class="flex-col m-4 overflow-y-hidden">
              <div v-for="task in doneTasks" class="flex-col bg-white mt-3">
                <div>
                  <div class="flex justify-between items-center">
                    <div class="font-semibold p-2">{{task.title}}</div>
                    <div class="flex mr-4">
                      <a @click="showEditForm(task.id)">
                        <svg
                          class="w-5 h-5 mr-2 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-3-3h24v24H-3z" />
                            <path d="M2 15.08V16h.92l9.06-9.06-.92-.92z" />
                            <path
                              d="M17.71 4.04a.996.996 0 000-1.41L15.37.29c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM0 14.25V18h3.75L14.81 6.94l-3.75-3.75L0 14.25zM2.92 16H2v-.92l9.06-9.06.92.92L2.92 16z"
                              fill="#2596be"
                            />
                          </g>
                        </svg>
                      </a>
                      <a @click="deleteTask(task.id)">
                        <svg
                          class="w-4 h-5 cursor-pointer"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g fill="none" fill-rule="evenodd">
                            <path d="M-5-3h24v24H-5z" />
                            <path
                              d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V4H1v12zM3 6h8v10H3V6zm7.5-5l-1-1h-5l-1 1H0v2h14V1h-3.5z"
                              fill="#c92e20"
                            />
                          </g>
                        </svg>
                      </a>
                    </div>
                  </div>
                  <div class="p-2 pb-1 text-sm">{{task.description}}</div>
                  <div class="p-2 pb-1 text-sm capitalize">
                    Priority: {{task.priority}}
                  </div>
                  <div class="p-2 pb-1 text-sm">
                    Due Date: {{adjustDateForMainPage(task.due_date)}}
                  </div>
                </div>
                <div :class="getPriorityColor(task.priority)">&nbsp</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Add Task -->
      <div
        class="
          w-screen
          h-screen
          flex flex-col
          justify-center
          items-center
          bg-primarycolor
        "
        v-if="isLogin && isAddingTask"
      >
        <div class="w-1/2 mb-7">
          <h2 class="text-4xl text-white font-display font-bold">
            Add Your Task
          </h2>
        </div>
        <div
          :class="{'w-1/2 h-screen/2++ bg-white rounded-md shadow-2xl text-gray-600': !errorMessage, 'w-1/2 h-screen3/4 bg-white rounded-md shadow-2xl text-gray-600': errorMessage}"
        >
          <form id="form-add" @submit.prevent="submitTask">
            <div>
              <label
                class="text-2xl font-display mt-6 ml-7 inline-block"
                for="title"
                >Title</label
              ><br />
              <input
                class="
                  w-11/12
                  text-lg
                  my-2
                  ml-7
                  border-b-2
                  focus:border-primarycolor
                  outline-none
                  transition-all
                  duration-500
                "
                id="title"
                type="text"
                name="title"
                v-model="task.title"
              />
            </div>
            <div>
              <label
                class="
                  text-gray-600 text-2xl
                  font-display
                  mt-6
                  ml-7
                  inline-block
                "
                for="description"
                >Description</label
              ><br />
              <textarea
                class="
                  w-11/12
                  my-2
                  ml-7
                  border-2
                  focus:outline-none focus:border-primarycolor
                "
                name="description"
                id="description"
                cols="30"
                rows="10"
                v-model="task.description"
              ></textarea>
            </div>
            <div class="flex items-center justify-evenly">
              <div>
                <label for="priority">Priority</label><br />
                <select
                  class="w-48"
                  name="priority"
                  id="priority"
                  v-model="task.priority"
                >
                  <option value="" selected>-----</option>
                  <option value="high">High</option>
                  <option value="medium">Medium</option>
                  <option value="low">Low</option>
                </select>
              </div>
              <div>
                <label for="category">Category</label><br />
                <select
                  class="w-48"
                  name="category"
                  id="category"
                  v-model="task.category"
                >
                  <option value="" selected>-----</option>
                  <option value="backlog">Backlog</option>
                  <option value="todo">Todo</option>
                  <option value="in progress">In Progress</option>
                  <option value="done">Done</option>
                </select>
              </div>
              <div>
                <label for="due_date">Due Date</label><br />
                <input
                  id="due_date"
                  name="due_date"
                  type="datetime-local"
                  :value="task.due_date"
                  @change="adjustDateForSubmission"
                />
              </div>
            </div>
            <div class="text-sm text-red-400 ml-8 mt-6" v-if="errorMessage">
              {{errorMessage}}
            </div>
            <input
              class="
                ml-8
                mt-8
                bg-primarycolor
                px-4
                py-1
                rounded-md
                text-white
                cursor-pointer
                transform
                hover:translate-y-1
                transition-all
                duration-500
              "
              type="submit"
            />
          </form>
        </div>
        <div class="w-1/2 mt-4">
          <a
            class="text-white cursor-pointer justify-self-start font-medium"
            @click.prevent="backToHome"
          >
            Back To Home Page</a
          >
        </div>
      </div>


      <!-- Edit Task -->
      <div
        class="
          w-screen
          h-screen
          flex flex-col
          justify-center
          items-center
          bg-primarycolor
        "
        v-if="isLogin && isEditingTask"
      >
        <div class="w-1/2 mb-7">
          <h2 class="text-4xl text-white font-display font-bold">
            Edit Your Task
          </h2>
        </div>
        <div
          :class="{'w-1/2 h-screen/2++ bg-white rounded-md shadow-2xl text-gray-600': !errorMessage, 'w-1/2 h-screen3/4 bg-white rounded-md shadow-2xl text-gray-600': errorMessage}"
        >
          <form id="form-add" @submit.prevent="submitEditTask(task.id)">
            <div>
              <label
                class="text-2xl font-display mt-6 ml-7 inline-block"
                for="editTitle"
                >Title</label
              ><br />
              <input
                class="
                  w-11/12
                  text-lg
                  my-2
                  ml-7
                  border-b-2
                  focus:border-primarycolor
                  outline-none
                  transition-all
                  duration-500
                "
                id="editTitle"
                type="text"
                name="title"
                v-model="task.title"
              />
            </div>
            <div>
              <label
                class="
                  text-gray-600 text-2xl
                  font-display
                  mt-6
                  ml-7
                  inline-block
                "
                for="editDescription"
                >Description</label
              ><br />
              <textarea
                class="
                  w-11/12
                  my-2
                  ml-7
                  border-2
                  focus:outline-none focus:border-primarycolor
                "
                name="description"
                id="editDescription"
                cols="30"
                rows="10"
                v-model="task.description"
              ></textarea>
            </div>
            <div class="flex items-center justify-evenly">
              <div>
                <label for="editPriority">Priority</label><br />
                <select
                  class="w-48"
                  name="priority"
                  id="editPriority"
                  v-model="task.priority"
                >
                  <option value="" selected>-----</option>
                  <option value="high">High</option>
                  <option value="medium">Medium</option>
                  <option value="low">Low</option>
                </select>
              </div>
              <div>
                <label for="editCategory">Category</label><br />
                <select
                  class="w-48"
                  name="category"
                  id="editCategory"
                  v-model="task.category"
                >
                  <option value="" selected>-----</option>
                  <option value="backlog">Backlog</option>
                  <option value="todo">Todo</option>
                  <option value="in progress">In Progress</option>
                  <option value="done">Done</option>
                </select>
              </div>
              <div>
                <label for="editDueDate">Due Date</label><br />
                <input
                  id="editDueDate"
                  name="due_date"
                  type="datetime-local"
                  :value="task.due_date"
                  @change="adjustDateForSubmission"
                />
              </div>
            </div>
            <div class="text-sm text-red-400 ml-8 mt-6" v-if="errorMessage">
              {{errorMessage}}
            </div>
            <input
              class="
                ml-8
                mt-8
                bg-primarycolor
                px-4
                py-1
                rounded-md
                text-white
                cursor-pointer
                transform
                hover:translate-y-1
                transition-all
                duration-500
              "
              type="submit"
            />
          </form>
        </div>
        <div class="w-1/2 mt-4">
          <a
            class="text-white cursor-pointer justify-self-start font-medium"
            @click.prevent="backToHome"
            >Back To Home Page</a
          >
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="./main.js"></script>
  </body>
</html>
